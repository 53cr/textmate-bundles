<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<title>CocoaDialog - Examples</title>
<link href="cocoadialog.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div>
	<table cellpadding="0" cellspacing="0" border="0" width="100%">
	<tr><td class="header">CocoaDialog</td></tr>
	<tr><td class="headerMenu">
		<a href="index.html">overview</a> |
		<a href="download.html">download</a> |
		<a href="documentation.html">documentation</a> |
		<a href="examples.html" class="current">examples</a> |
		<a href="todo.html">todo</a> |
		<a href="http://sourceforge.net/projects/cocoadialog/">sf.net project page</a>
	</td></tr>
	</table>
	
	<div class="bodyContent">
		<a name="top"></a>
		<ul>
			<li><a href="#ok">ok-msgbox shell script</a></li>
			<li><a href="#yesno">yesno-msgbox shell script</a></li>
			<li><a href="#msgbox">msgbox shell script</a></li>
			<li><a href="#standard-inputbox">standard-inputbox Perl script</a></li>
			<li><a href="#inputbox">inputbox Perl script</a></li>
			<li><a href="#progressbar">progressbar Perl script</a></li>
			<li><a href="#progressbar2">progressbar shell script</a></li>
			<li><a href="#textbox">textbox Perl script</a></li>
			<li><a href="#fileselect">fileselect shell script</a></li>
			<li><a href="#php">PHP wrapper functions and examples</a></li>
			<li><a href="#finding">Finding CocoaDialog executable</a></li>
		</ul>

		<a name="ok"></a>
		<h3>ok-msgbox shell script</h3>
		<p><a href="examples/ok.sh.txt">download</a></p>
		<div class="code">
			<pre>
#!/bin/bash

CD=&quot;$HOME/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;

rv=`$CD ok-msgbox --text &quot;We need to make sure you see this message&quot; \
    --informative-text &quot;(Yes, the message was to inform you about itself)&quot; \
    --style critical --no-newline`
if [ &quot;$rv&quot; == &quot;1&quot; ]; then
    echo &quot;User said OK&quot;
elif [ &quot;$rv&quot; == &quot;2&quot; ]; then
    echo &quot;Canceling&quot;
    exit
fi
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="yesno"></a>
		<h3>yesno-msgbox shell script</h3>
		<p><a href="examples/yesno.sh.txt">download</a></p>
		<div class="code">
			<pre>
#!/bin/bash

CD=&quot;$HOME/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;

### Example 1
rv=`$CD yesno-msgbox --no-cancel --string-output --no-newline \
    --text  &quot;This is a simple first example&quot; \
    --informative-text &quot;We're just going to echo the string output&quot;`
echo &quot;User pressed the $rv button&quot;

### Example 2
rv=`$CD yesno-msgbox --text &quot;Do you like CocoaDialog?&quot;`
if [ &quot;$rv&quot; == &quot;1&quot; ]; then
    echo &quot;User likes this program&quot;
elif [ &quot;$rv&quot; == &quot;2&quot; ]; then
    echo &quot;User does not like this program&quot;
elif [ &quot;$rv&quot; == &quot;3&quot; ]; then
    echo &quot;User has no opinion (pressed cancel)&quot;
fi
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="msgbox"></a>
		<h3>msgbox shell script</h3>
		<p><a href="examples/msgbox.sh.txt">download</a></p>
		<div class="code">
			<pre>
#!/bin/bash

CD=&quot;$HOME/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;

rv=`$CD msgbox --no-newline \
    --text &quot;What's your favorite OS?&quot; \
    --informative-text &quot;The 'Cancel' label auto-binds that button to esc&quot; \
    --button1 &quot;OS X&quot; --button2 &quot;GNU/Linux&quot; --button3 &quot;Cancel&quot;`
if [ &quot;$rv&quot; == &quot;1&quot; ]; then
    echo &quot;User likes Macs&quot;
elif [ &quot;$rv&quot; == &quot;2&quot; ]; then
    echo &quot;User likes Linux&quot;
elif [ &quot;$rv&quot; == &quot;3&quot; ]; then
    echo &quot;User doesn't care&quot;
fi
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="standard-inputbox"></a>
		<h3>standard-inputbox Perl script</h3>
		<p><a href="examples/standard-inputbox.pl.txt">download</a></p>
		<div class="code">
			<pre>
#!/usr/bin/perl -w
use strict;

our $CD = &quot;$ENV{HOME}/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;;

my $rv = `$CD standard-inputbox --title &quot;Your Name&quot; --no-newline \\
    --informative-text &quot;Enter your name&quot;`;

my ($button_rv, $name) = split /\n/, $rv, 2;
if ($button_rv == 1) {
    print &quot;Hello $name\n&quot;;
} elsif ($button_rv == 2) {
    print &quot;No name given\n&quot;;
}
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="inputbox"></a>
		<h3>inputbox Perl script</h3>
		<p><a href="examples/inputbox.pl.txt">download</a></p>
		<div class="code">
			<pre>
#!/usr/bin/perl -w
use strict;

our $CD = &quot;$ENV{HOME}/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;;

my $rv = `$CD inputbox --title &quot;Search&quot; --no-newline \\
    --informative-text &quot;Enter your search term&quot; \\
    --text &quot;foobar&quot; \\
    --button1 &quot;Search&quot; --button2 &quot;Search all&quot; \\
    --width 600`;

my ($button_rv, $term) = split /\n/, $rv, 2;
if ($button_rv == 1) {
    print &quot;Search for '$term'\n&quot;;
} elsif ($button_rv == 2) {
    print &quot;Search all files for '$term'\n&quot;;
}
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="progressbar"></a>
		<h3>progressbar Perl script</h3>
		<p><a href="examples/progressbar.pl.txt">download</a></p>
		<div class="code">
			<pre>
#!/usr/bin/perl -w

use strict;
use IO::File;

our $COCOA_DIALOG = &quot;$ENV{HOME}/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;;
die &quot;$COCOA_DIALOG doesn't exist&quot; unless -e $COCOA_DIALOG;

###
### EXAMPLE 1
###

### Open a pipe to the program
my $fh = IO::File-&gt;new(&quot;|$COCOA_DIALOG progressbar&quot;);
die &quot;no fh&quot; unless defined $fh;
$fh-&gt;autoflush(1);

my $percent = 0;
for (my $percent = 0; $percent &lt;= 100; $percent++) {
    if (!($percent % 5)) {
        ### Update the progressbar and its label every 5%
        print $fh &quot;$percent we're at $percent%\n&quot;;
    } else {
        ### Update the progressbar every percent
        print $fh &quot;$percent\n&quot;;
    }
    ### simulate a long operation
    1 for (0 .. 90_000);
}

### Close the filehandle to send an EOF
$fh-&gt;close();

###
### EXAMPLE 2
###

### Now let's do an indeterminate one
$fh = IO::File-&gt;new(&quot;|$COCOA_DIALOG progressbar --indeterminate&quot;);
die &quot;no fh&quot; unless defined $fh;
$fh-&gt;autoflush(1);

### Just loop an arbitrary number of times to simulate something taking
### a long time
for (0 .. 1_500_000) {
    ### Update the label every once and a while.
    if (!($_ % 300_000)) {
        my @msgs = ('Still going', 'This might take a while',
            'Please be patient', 'Who knows how long this will take');
        my $msg = @msgs[rand @msgs];
        ### It does not matter what percent you use on an indeterminate
        ### progressbar.  We're using 0
        print $fh &quot;0 $msg\n&quot;;
    }
}

### Close the filehandle to send an EOF
$fh-&gt;close();

###
### EXAMPLE 3
###

### Here's a more practical example of using an indeterminate progressbar
my $args = '--title &quot;Working...&quot; --text &quot;This will take a while&quot;';
$fh = IO::File-&gt;new(&quot;|$COCOA_DIALOG progressbar --indeterminate $args&quot;);
die &quot;no fh&quot; unless defined $fh;
$fh-&gt;autoflush(1);

# Do your really long operation here.
sleep 8;

$fh-&gt;close();
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="progressbar2"></a>
		<h3>progressbar shell script</h3>
		<p>
		Thanks to Kevin Hendricks for writing this and sending it in.
		<br />
		<a href="examples/progressbar.sh.txt">download</a>
		</p>
		<div class="code">
			<pre>
#!/bin/bash

# create a named pipe
rm -f /tmp/hpipe
mkfifo /tmp/hpipe

# create a background job which takes its input from the named pipe
~/Desktop/CocoaDialog.app/Contents/MacOS/CocoaDialog progressbar \
	--indeterminate --title &quot;My Program&quot; \
	--text &quot;Please wait...&quot; &lt; /tmp/hpipe &amp;

# associate file descriptor 3 with that pipe and send a character through the pipe
exec 3&lt;&gt; /tmp/hpipe
echo -n . &gt;&amp;3

# do all of your work here
sleep 20

# now turn off the progress bar by closing file descriptor 3
exec 3&gt;&amp;-

# wait for all background jobs to exit
wait
rm -f /tmp/hpipe
exit 0
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="textbox"></a>
		<h3>textbox Perl script</h3>
		<p><a href="examples/textbox.pl.txt">download</a></p>
		<div class="code">
			<pre>
#!/usr/bin/perl -w
use strict;

our $CD = &quot;$ENV{HOME}/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;;

my $rv;

### Non-editable example
if (-e &quot;COPYING&quot;) {
    $rv = `$CD textbox --title &quot;License&quot; --no-newline \\
        --informative-text &quot;Do you agree with the terms of this license?&quot; \\
        --text-from-file COPYING --button1 Ok --button2 Cancel`;
} else {
    $rv = `$CD textbox --title &quot;License&quot; --no-newline \\
        --informative-text &quot;Do you agree with the terms of this license?&quot; \\
        --text &quot;This is the text of the license....&quot; \\
        --button1 Ok --button2 Cancel`;
}
if ($rv == 1) {
    print &quot;User agrees\n&quot;;
} else {
    print &quot;User canceled\n&quot;;
}

### Editable example
$rv = `$CD textbox --title &quot;Tell me a story&quot; \\
    --informative-text &quot;Write up a story...&quot; \\
    --button1 &quot;Echo&quot; \\
    --button2 &quot;Cancel&quot; \\
    --text &quot;Whatever you want&quot; \\
    --selected \\
    --scroll-top top \\
    --editable`;
# First line is the button value, the rest is the textbox
my ($button_rv, $text) = split /\n/, $rv, 2;
if ($button_rv == 1) {
    print &quot;$text&quot;;
} elsif ($button_rv == 2) {
    print &quot;User hit cancel\n&quot;;
}
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="fileselect"></a>
		<h3>fileselect shell script</h3>
		<p><a href="examples/fileselect.sh.txt">download</a></p>
		<div class="code">
			<pre>
#!/bin/bash

CD=&quot;$HOME/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;

### Example 1
rv=`$CD fileselect \
    --text &quot;Choose the source file for the main controller&quot; \
    --with-extensions .c .m .cpp`
if [ -n &quot;$rv&quot; ]; then  ### if $rv has a non-zero length
    echo &quot;Main source: $rv&quot;
else
    echo &quot;No source file selected&quot;
fi

### Example 2
rv=`$CD fileselect \
    --text &quot;Pick some files and/or directories&quot; \
    --with-directory $HOME/Documents/ \
    --select-directories \
    --select-multiple`
if [ -n &quot;$rv&quot; ]; then
    ### Loop over lines returned by fileselect
    echo -e &quot;$rv&quot; | while read file; do
        ### Check if it's a directory
        if [ -d &quot;$file&quot; ]; then
            echo &quot;Directory: $file&quot;
        ### Else a regular file
        elif [ -e &quot;$file&quot; ]; then
            echo &quot;Regular file: $file&quot;
        fi
    done
else
    echo &quot;No files chosen&quot;
fi
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="php"></a>
		<h3>PHP wrapper functions and examples</h3>
		<p>Thanks to Stefan Lange-Hegermann for sending in this set of
		PHP functions to wrap various CocoaDialog controls.</p>
		<p><a href="examples/cocoadialog.php.txt">download</a></p>
		<div class="code">
			<pre>
#!/usr/bin/php
&lt;?php
/*
Very Simple PHP Wrapper for CocoaDialog
This is free, no limitations whatsoever
use at your own risc

Written by Stefan Lange-Hegermann
*/

// Settings:
/**********/

define(&quot;CDPATH&quot;, &quot;~/Applications/CocoaDialog.app&quot;);

/**********/


function CDmsgbox($title,$text,$informtext,$button1,$button2='',$button3='',$style='informational')
{
		$execstr=CDPATH.&quot;/Contents/MacOS/CocoaDialog msgbox \\
			--text \&quot;$text\&quot; --informative-text \&quot;$informtext\&quot; \\
			--button1 \&quot;$button1\&quot; --button2 \&quot;$button2\&quot; \\
			--button3 \&quot;$button3\&quot; --style $style --title \&quot;$title\&quot;&quot;;
    return exec($execstr);
}

function CDokmsgbox($title,$text,$informtext,$nocancel=false,$style='informational')
{
		$execstr=CDPATH.&quot;/Contents/MacOS/CocoaDialog ok-msgbox \\
			--text \&quot;$text\&quot; --informative-text \&quot;$informtext\&quot; \\
			--style $style --title \&quot;$title\&quot; &quot;;
    if ($nocancel) $execstr.='--no-cancel';
    return exec($execstr);
}

function CDyesnomsgbox($title,$text,$informtext,$nocancel=false,$style='informational')
{
		$execstr=CDPATH.&quot;/Contents/MacOS/CocoaDialog yesno-msgbox \\
			--text \&quot;$text\&quot; --informative-text \&quot;$informtext\&quot; \\
			--style $style --title \&quot;$title\&quot;&quot;;
    if ($nocancel) $execstr.=' --no-cancel';
    return exec($execstr);
}

function CDfileselect($title,$text,$startdir='',$extlist='',$selectdirs=false,$selectmulti=false)
{
		$execstr=CDPATH.&quot;/Contents/MacOS/CocoaDialog fileselect \\
			--text \&quot;$text\&quot; --with-directory \&quot;$startdir\&quot; \\
			--title \&quot;$title\&quot;&quot;;
    if ($selectdir) $execstr.=' --select-directories';
    if ($selectmulti) $execstr.=' --select-multiple';
    if ($startdir!='') $execstr.=&quot; --with-extensions $extlist&quot;;

    return exec($execstr);
}

function CDtextbox($title,$text,$informtext,$button1,$button2='',
	$button3='',$editable=false,$selected=false,$scrollto='top')
{
		$execstr=CDPATH.&quot;/Contents/MacOS/CocoaDialog textbox \\
			--text \&quot;$text\&quot; --informative-text \&quot;$informtext\&quot; \\
			--button1 \&quot;$button1\&quot; --title \&quot;$title\&quot; --scroll-to $scrollto&quot;;
    if ($button2!='')  $execstr.=&quot; --button2 \&quot;$button2\&quot;&quot;;
    if ($button3!='')  $execstr.=&quot; --button3 \&quot;$button3\&quot;&quot;;
    if ($editable) $execstr.=' --editable';
    if ($selected) $execstr.=' --selected';
    return shell_exec($execstr);
}

function CDprogressbar($title,$text,$percent=0,$indeterminate=false)
{
		$execstr=CDPATH.&quot;/Contents/MacOS/CocoaDialog progressbar \\
			--text \&quot;$text\&quot; --title \&quot;$title\&quot; --percent $percent&quot;;
    return popen ( $execstr, &quot;w&quot;);
}

function CDbarvalue($bar,$value,$text='')
{
    $space='';
    if ($text!='') $space=' ';
    fwrite($bar,$value.$space.$text.&quot;\n&quot;);
}


// To use this as a library remove everything from

// ****** HERE ******


// msgbox
echo CDmsgbox(&quot;CocoaDialog : msgbox&quot;,&quot;message box&quot;,
	&quot; This control provides a generic message box.\nIt allows you to customize the labels of the buttons.&quot;,
	&quot;one&quot;,&quot;two&quot;,&quot;three&quot;).&quot;\n&quot;;

// ok-msgbox
echo CDokmsgbox(&quot;CocoaDialog : ok-msgbox&quot;,
	&quot;OK/Cancel message box&quot;,
	&quot;This control provides a standard Ok/Cancel message box.&quot;,
	true).&quot;\n&quot;;

// yesno-msgbox
echo CDyesnomsgbox(&quot;CocoaDialog : yesno-msgbox&quot;,
	&quot;Yes/No/Cancel message box&quot;,
	&quot; This control provides a standard Yes/No/Cancel message box.&quot;).&quot;\n&quot;;

// fileselect
echo CDfileselect(&quot;CocoaDialog : fileselect&quot;,
	&quot;file selection window&quot;).&quot;\n&quot;;

// textbox
echo CDtextbox(&quot;CocoaDialog : textbox&quot;,&quot;text box&quot;,
	&quot; This is a text box with a large text area.&quot;,
	&quot;One&quot;,&quot;Two&quot;,&quot;&quot;,true).&quot;\n&quot;;

// progressbar
$myPBar = CDprogressbar(&quot;CocoaDialog : progressbar&quot;,
	&quot;progress bar&quot;);
for ($a=1;$a&lt;101;$a++)
{

    for ($b=0;$b&lt;1;$b=$b+0.0002)
    {
        $foo=sin($b);
    }
    CDbarvalue($myPBar,$a,&quot;Calculation progress: &quot;.$a.&quot;%&quot;);
}
fclose($myPBar);

echo CDokmsgbox(&quot;Done&quot;,&quot;All GUI Controls done&quot;,
	&quot;You have seen everything, now let's hope for a simple one line Text input control ;)&quot;,
	true).&quot;\n&quot;;

// **** To HERE ****
?&gt; 
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

		<a name="finding"></a>
		<h3>Finding CocoaDialog executable</h3>
		<p><a href="examples/find_cocoadialog.sh.txt">download shell script</a></p>
		<div class="code">
			<pre>
#!/bin/bash

COCOA_DIALOG=&quot;&quot;

if [ -d &quot;/Applications/CocoaDialog.app&quot; ]; then
    COCOA_DIALOG=&quot;/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;
elif [ -d &quot;$HOME/Applications/CocoaDialog.app&quot; ]; then
    COCOA_DIALOG=&quot;$HOME/Applications/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;
else
    echo &quot;CocoaDialog.app not found&quot;
    exit 1
fi
			</pre>
		</div>
		<p><a href="examples/find_cocoadialog.pl.txt">download Perl script</a></p>
		<div class="code">
			<pre>
#!/usr/bin/perl -w
use strict;

our $COCOA_DIALOG = undef;
for my $path (('/Applications', &quot;$ENV{HOME}/Applications&quot;)) {
    if (-d &quot;$path/CocoaDialog.app&quot;) {
        $COCOA_DIALOG = &quot;$path/CocoaDialog.app/Contents/MacOS/CocoaDialog&quot;;
        last;
    }
}
unless (defined $COCOA_DIALOG) {
    die &quot;Could not find CocoaDialog.app&quot;;
}
			</pre>
		</div>
		<p style="text-align:right"><a href="#top">back to the top</a></p>

	</div>

	<div class="footer">
		<a  href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=106818&amp;type=1"  width="88" height="31" alt="SourceForge.net Logo"  /></a>
		<a href="http://validator.w3.org/check/referer"><img
			src="http://www.w3.org/Icons/valid-xhtml10"
			alt="Valid XHTML 1.0!" height="31" width="88" /></a>
		<a href="http://jigsaw.w3.org/css-validator/"><img
			style="border:0;width:88px;height:31px"
			src="http://jigsaw.w3.org/css-validator/images/vcss" 
			alt="Valid CSS!" /></a>
	</div>

</div>
</body>
</html>
